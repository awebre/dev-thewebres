<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Hi! I&#39;m Austin Webre, and this is my dev blog."><meta name="generator" content="Eleventy v1.0.2"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><title>Cloudflare SSL Cert with Azure Container Apps</title><link rel="stylesheet" href="/site.css"></head><body class="font-sans leading-normal tracking-normal text-gray-900"><div class="m-20"><h3 class="text-lg font-semibold"><a class="text-teal-500 hover:text-teal-600 hover:underline" href="/">dev.thewebres.com</a></h3><article class="mt-4"><h1 class="text-3xl font-bold">Cloudflare SSL Cert with Azure Container Apps</h1><div class="flex justify-between"><p class="text-sm italic text-gray-400">How to bind a custom domain name with Azure Container Apps with Cloudflare</p><p class="text-sm text-gray-400">3/24/2023, 7:20:00 PM CDT</p></div><hr class="mt-2 mb-8"><section><h3 class="text-lg font-bold">Azure Container Apps + Cloudflare</h3><br><p>Azure Container Apps require an SNI/SSL Certificate to be bound in order for custom domain names to work. You can use Azure DNS Zones and <a href="">this helpful open source project</a> to create automatically renewing certs via Let's Encrypt, but Azure DNS Zones cost money (as do the Azure Functions and other resources required for the automatically renewing cert). Instead, I opted to use Cloudflare's free Origin Certificates, which can be set to expire every 15 years and you can configure notifications for expiring certs.</p><br><p>On Azure, go to your container apps environment and select Certificates -> "Add Certificate". Then go to Cloudflare, select the domain you would like to generate a certificate for and click SSL/TLS -> Origin Server. Click "Create Certificate", and then click "Create" (the defaults should be sufficient). From there you will be brought to a screen with the Origin Certificate and the Private Key encoded as text. Create a file on your desktop called your-domain.pem and past the full text of the private key followed by the full text of the public key. DO NOT LEAVE THIS PAGE UNTIL YOU HAVE SUCCESSFULLY UPLOADED AND BOUND YOUR CERT.</p><br><p>With this certificate saved to disk, go back to the Azure Portal and upload your certificate. Then go to the Azure Container App that you wish to bind the custom domain to and go to Custom Domains. Add a custom domain, enter the information required to validate your domain (some of which will be DNS entries you need to enter in Cloudflare). Once you've validated your domain, you can bind the certificate by selecting the certificate you uploaded earlier to the ACA Environment.</p><br><p>In a matter of minutes, you should be serving your container app over your custom domain!</p></section></article><footer><div class="flex mt-16"><a class="mr-2" href="https://github.com/awebre"><svg class="h-12" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg> </a><a rel="me" href="https://poboy.social/@riverrat"><svg class="h-12" viewBox="0 0 16 16"><path d="M 15.659 9.592 C 15.424 10.72 13.553 11.956 11.404 12.195 C 10.283 12.32 9.18 12.434 8.003 12.384 C 6.079 12.302 4.56 11.956 4.56 11.956 C 4.56 12.13 4.572 12.297 4.595 12.452 C 4.845 14.224 6.478 14.33 8.025 14.379 C 9.586 14.429 10.976 14.02 10.976 14.02 L 11.04 15.337 C 11.04 15.337 9.948 15.884 8.003 15.984 C 6.93 16.039 5.598 15.959 4.047 15.576 C 0.683 14.746 0.104 11.4 0.015 8.006 C -0.012 6.998 0.005 6.048 0.005 5.253 C 0.005 1.782 2.443 0.765 2.443 0.765 C 3.672 0.238 5.782 0.017 7.975 0 L 8.029 0 C 10.221 0.017 12.332 0.238 13.561 0.765 C 13.561 0.765 15.999 1.782 15.999 5.253 C 15.999 5.253 16.03 7.814 15.659 9.592 Z M 13.124 5.522 L 13.124 9.725 L 11.339 9.725 L 11.339 5.646 C 11.339 4.786 10.951 4.35 10.175 4.35 C 9.317 4.35 8.887 4.867 8.887 5.891 L 8.887 8.124 L 7.113 8.124 L 7.113 5.891 C 7.113 4.867 6.683 4.35 5.825 4.35 C 5.049 4.35 4.661 4.786 4.661 5.646 L 4.661 9.725 L 2.876 9.725 L 2.876 5.522 C 2.876 4.663 3.111 3.981 3.582 3.476 C 4.067 2.971 4.703 2.712 5.493 2.712 C 6.406 2.712 7.098 3.039 7.555 3.695 L 8 4.39 L 8.445 3.695 C 8.902 3.039 9.594 2.712 10.507 2.712 C 11.297 2.712 11.933 2.971 12.418 3.476 C 12.889 3.981 13.124 4.663 13.124 5.522 Z" style="stroke:none;stroke-miterlimit:10;fill-rule:evenodd;"/></svg></a></div></footer></div></body></html>